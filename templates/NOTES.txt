1. Configured default user:

Username: {{ .Values.auth.adminUser }}
Password: {{ .Values.auth.adminPassword }}

2. If this is a production cluster, please configure persistent volumes.
   The default reclaimPolicy for dynamically provisioned persistent volumes is "Delete" and
   users are advised to change it for production

   The code snippet below can be used to set reclaimPolicy to "Retain" for all volumes:

PVCs=$(kubectl --namespace={{ .Release.Namespace }} get pvc -l release={{ .Release.Name }} -o name)

for pvc in $PVCs; do
    volumeName=$(kubectl -n {{ .Release.Namespace }} get $pvc -o template --template=\{\{.spec.volumeName\}\})
    kubectl -n {{ .Release.Namespace }} patch pv $volumeName -p '{"spec":{"persistentVolumeReclaimPolicy":"Retain"}}'
done

3. Set default target for shipa-client:
export SHIPA_HOST=$(kubectl --namespace={{ .Release.Namespace }} get svc {{ template "shipa.fullname" . }}-ingress-nginx  -o jsonpath="{.status.loadBalancer.ingress[0].ip}")

export SHIPA_TARGET_NAME={{ .Release.Name }}
mkdir -p $HOME/.shipa/certificates/$SHIPA_TARGET_NAME
kubectl exec -n {{ .Release.Namespace }} $(kubectl -n {{ .Release.Namespace }} get pod -l app.kubernetes.io/name={{ template "shipa.fullname" . }} -o=name) -- cat "certs/ca.pem" > $HOME/.shipa/certificates/$SHIPA_TARGET_NAME/ca.crt
shipa target-add $SHIPA_TARGET_NAME $SHIPA_HOST --port={{ .Values.shipaApi.securePort }} -s

shipa login {{ .Values.auth.adminUser }}
shipa node-list
shipa app-list

